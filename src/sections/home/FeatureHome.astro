---
import { Icon } from "astro-icon/components";
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
type props = {
  projects: CollectionEntry<"projects">[];
};
const { projects } = Astro.props as props;
const featuredProjects = projects.filter((p) => p.data.featured);
---

<!-- Featured Projects Section -->
<section class="py-20 px-4 bg-base-200">
  <div class="container mx-auto max-w-6xl">
    <h2 class="text-4xl font-bold text-center mb-12">Featured Projects</h2>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        featuredProjects.map((project) => (
          <div class="card bg-base-100 shadow-xl">
            <figure class="px-10 pt-10">
              <div class="relative bg-base-300 w-full aspect-video rounded-xl overflow-hidden">
                {project.data.imageUrl ? (
                  <>
                    <Image
                      src={project.data.imageUrl}
                      alt={project.data.title}
                      width={600}
                      height={400}
                      class="w-full h-full object-cover rounded-xl"
                      loading="eager"
                      decoding="async"
                    />
                    <div class="absolute inset-0 bg-base-300/20" />
                  </>
                ) : (
                  <div class="flex items-center justify-center h-full">
                    <Icon
                      name="lucide:image"
                      class="h-16 w-16 sm:h-20 sm:w-20 opacity-20"
                    />
                  </div>
                )}
              </div>
            </figure>
            <div class="card-body">
              <h3 class="card-title">{project.data.title}</h3>
              <p>{project.data.short}</p>
              <div class="card-actions justify-end mt-4">
                {project.data.demo && (
                  <a
                    href={project.data.demo}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn btn-primary btn-sm sm:btn-md gap-2"
                  >
                    <Icon
                      name="lucide:external-link"
                      class="h-4 w-4 sm:h-5 sm:w-5"
                    />
                    Live Demo
                  </a>
                )}
              </div>
            </div>
          </div>
        ))
      }
    </div>

    <div class="text-center mt-12">
      <a href="/projects" class="btn btn-outline btn-lg">
        View All Projects
        <Icon name="lucide:arrow-right" class="h-5 w-5 ml-2" />
      </a>
    </div>
  </div>
</section>
